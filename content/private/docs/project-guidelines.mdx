---
title: "é¡¹ç›®å¼€å‘è§„èŒƒ"
date: "2024-12-10"
description: "Swift Coding Club é¡¹ç›®å¼€å‘çš„è§„èŒƒå’Œæœ€ä½³å®è·µï¼ŒåŒ…æ‹¬ Git å·¥ä½œæµã€ä»£ç è§„èŒƒå’Œæ–‡æ¡£è¦æ±‚ã€‚"
---

# é¡¹ç›®å¼€å‘è§„èŒƒ ğŸ“

æœ¬æ–‡æ¡£å®šä¹‰äº† Swift Coding Club æ‰€æœ‰é¡¹ç›®çš„å¼€å‘è§„èŒƒï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå›¢é˜Ÿåä½œæ•ˆç‡ã€‚

## ğŸŒ¿ Git å·¥ä½œæµ

### åˆ†æ”¯ç­–ç•¥

æˆ‘ä»¬é‡‡ç”¨ **Git Flow** å·¥ä½œæµï¼š

```
main (ç”Ÿäº§ç¯å¢ƒ)
  â†‘
develop (å¼€å‘ä¸»åˆ†æ”¯)
  â†‘
feature/* (åŠŸèƒ½åˆ†æ”¯)
hotfix/* (ç´§æ€¥ä¿®å¤)
release/* (å‘å¸ƒåˆ†æ”¯)
```

**åˆ†æ”¯è¯´æ˜**ï¼š

| åˆ†æ”¯ç±»å‹    | å‘½åè§„èŒƒ           | ç”Ÿå‘½å‘¨æœŸ | ç”¨é€”          |
| ----------- | ------------------ | -------- | ------------- |
| `main`      | å›ºå®š               | æ°¸ä¹…     | ç”Ÿäº§ç¯å¢ƒä»£ç   |
| `develop`   | å›ºå®š               | æ°¸ä¹…     | å¼€å‘ä¸»åˆ†æ”¯    |
| `feature/*` | feature/æè¿°æ€§åç§° | ä¸´æ—¶     | æ–°åŠŸèƒ½å¼€å‘    |
| `hotfix/*`  | hotfix/é—®é¢˜æè¿°    | ä¸´æ—¶     | ç´§æ€¥ bug ä¿®å¤ |
| `release/*` | release/ç‰ˆæœ¬å·     | ä¸´æ—¶     | å‘å¸ƒå‡†å¤‡      |

### åˆ†æ”¯å‘½åç¤ºä¾‹

```bash
# åŠŸèƒ½åˆ†æ”¯
feature/user-authentication
feature/data-visualization
feature/backtest-engine

# ä¿®å¤åˆ†æ”¯
hotfix/login-error
hotfix/api-timeout

# å‘å¸ƒåˆ†æ”¯
release/v1.2.0
```

### æ ‡å‡†å¼€å‘æµç¨‹

```bash
# 1. ä» develop åˆ›å»ºç‰¹æ€§åˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b feature/my-new-feature

# 2. å¼€å‘å¹¶æäº¤
git add .
git commit -m "feat: add new feature"

# 3. æ¨é€åˆ°è¿œç¨‹
git push origin feature/my-new-feature

# 4. åˆ›å»º Pull Request
# åœ¨ GitHub ä¸Šåˆ›å»º PR: feature/my-new-feature -> develop

# 5. Code Review é€šè¿‡ååˆå¹¶
# é€šè¿‡ GitHub UI åˆå¹¶ï¼Œæˆ–ï¼š
git checkout develop
git merge --no-ff feature/my-new-feature
git push origin develop

# 6. åˆ é™¤ç‰¹æ€§åˆ†æ”¯
git branch -d feature/my-new-feature
git push origin --delete feature/my-new-feature
```

## ğŸ“ Commit è§„èŒƒ

### Commit Message æ ¼å¼

é‡‡ç”¨ **Conventional Commits** è§„èŒƒï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**ç¤ºä¾‹**ï¼š

```
feat(auth): add GitHub OAuth login

- Implemented OAuth flow
- Added session management
- Created login UI component

Closes #123
```

### Type ç±»å‹

| Type       | è¯´æ˜                   | ç¤ºä¾‹                                     |
| ---------- | ---------------------- | ---------------------------------------- |
| `feat`     | æ–°åŠŸèƒ½                 | feat: add user profile page              |
| `fix`      | Bug ä¿®å¤               | fix: resolve login timeout issue         |
| `docs`     | æ–‡æ¡£æ›´æ–°               | docs: update API documentation           |
| `style`    | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ | style: format code with prettier         |
| `refactor` | ä»£ç é‡æ„               | refactor: simplify data processing logic |
| `perf`     | æ€§èƒ½ä¼˜åŒ–               | perf: optimize database queries          |
| `test`     | æµ‹è¯•ç›¸å…³               | test: add unit tests for auth module     |
| `chore`    | æ„å»º/å·¥å…·å˜åŠ¨          | chore: update dependencies               |

### Commit æœ€ä½³å®è·µ

âœ… **åº”è¯¥åš**ï¼š

```bash
# æ¸…æ™°æè¿°å˜æ›´å†…å®¹
git commit -m "feat(api): add stock price endpoint"

# å…³è” Issue
git commit -m "fix(ui): resolve button alignment issue (#42)"

# å¤šè¡Œæè¿°å¤æ‚å˜æ›´
git commit -m "refactor(backtest): improve performance

- Use vectorized operations
- Reduce memory footprint by 40%
- Add progress indicator"
```

âŒ **ä¸åº”è¯¥åš**ï¼š

```bash
# æ¨¡ç³Šæè¿°
git commit -m "update"
git commit -m "fix bug"
git commit -m "æ”¹äº†ç‚¹ä¸œè¥¿"

# ä¸€æ¬¡æäº¤åŒ…å«å¤šä¸ªæ— å…³å˜æ›´
git commit -m "fix login, add dashboard, update README"
```

## ğŸ“‹ Pull Request è§„èŒƒ

### PR æ ‡é¢˜

æ ¼å¼åŒ Commit Messageï¼š

```
feat(component): add description
```

### PR æè¿°æ¨¡æ¿

```markdown
## å˜æ›´ç±»å‹

- [ ] æ–°åŠŸèƒ½ (Feature)
- [ ] Bug ä¿®å¤ (Fix)
- [ ] é‡æ„ (Refactor)
- [ ] æ–‡æ¡£ (Documentation)

## å˜æ›´å†…å®¹

ç®€è¦æè¿°æœ¬æ¬¡ PR çš„å˜æ›´å†…å®¹ã€‚

## ç›¸å…³ Issue

Closes #123
Related to #456

## æµ‹è¯•

- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] æ·»åŠ äº†å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ äº†é›†æˆæµ‹è¯•

## æˆªå›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰

![screenshot](url)

## Checklist

- [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [ ] å·²æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
```

### Review æµç¨‹

1. **è‡ªæŸ¥æ¸…å•**ï¼ˆæäº¤å‰ï¼‰

   - ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒ
   - æ˜¯å¦æœ‰å……åˆ†çš„æ³¨é‡Š
   - æ˜¯å¦æœ‰æµ‹è¯•è¦†ç›–
   - æ˜¯å¦æœ‰å†²çªéœ€è¦è§£å†³

2. **è‡³å°‘ä¸€ä½ Reviewer**

   - Core Member å¿…é¡»å‚ä¸ Review
   - éç´§æ€¥ PR è‡³å°‘ç­‰å¾… 24 å°æ—¶

3. **åé¦ˆå¤„ç†**

   - åŠæ—¶å“åº” Reviewer è¯„è®º
   - ä¿®æ”¹åé‡æ–°è¯·æ±‚ Review

4. **åˆå¹¶æ–¹å¼**
   - ä½¿ç”¨ **Squash and Merge**ï¼ˆå°å‹ PRï¼‰
   - ä½¿ç”¨ **Merge Commit**ï¼ˆå¤§å‹ featureï¼‰

## ğŸ’» ä»£ç è§„èŒƒ

### Python (PEP 8)

```python
# ä½¿ç”¨ Black æ ¼å¼åŒ–
# pyproject.toml
[tool.black]
line-length = 100
target-version = ['py311']

# ä½¿ç”¨ Flake8 æ£€æŸ¥
# .flake8
[flake8]
max-line-length = 100
extend-ignore = E203, W503

# ä½¿ç”¨ isort æ’åºå¯¼å…¥
# pyproject.toml
[tool.isort]
profile = "black"
line_length = 100
```

**ç¤ºä¾‹ä»£ç **ï¼š

```python
"""æ¨¡å—è¯´æ˜æ–‡æ¡£"""

from typing import List, Optional

import numpy as np
import pandas as pd

from my_module import MyClass


class DataProcessor:
    """æ•°æ®å¤„ç†ç±»

    Args:
        data: è¾“å…¥æ•°æ®
        config: é…ç½®å‚æ•°
    """

    def __init__(self, data: pd.DataFrame, config: Optional[dict] = None):
        self.data = data
        self.config = config or {}

    def process(self) -> pd.DataFrame:
        """å¤„ç†æ•°æ®

        Returns:
            å¤„ç†åçš„ DataFrame
        """
        # å…³é”®é€»è¾‘æ·»åŠ æ³¨é‡Š
        result = self._clean_data()
        result = self._transform_data(result)
        return result

    def _clean_data(self) -> pd.DataFrame:
        """ç§æœ‰æ–¹æ³•ï¼šæ¸…æ´—æ•°æ®"""
        return self.data.dropna()
```

### TypeScript/JavaScript

```typescript
// ä½¿ç”¨ ESLint + Prettier
// .eslintrc.json
{
  "extends": ["next/core-web-vitals", "prettier"],
  "rules": {
    "no-console": "warn",
    "prefer-const": "error"
  }
}

// prettier.config.js
module.exports = {
  semi: true,
  singleQuote: true,
  printWidth: 100,
  tabWidth: 2,
};
```

**ç¤ºä¾‹ä»£ç **ï¼š

```typescript
/**
 * ç”¨æˆ·æœåŠ¡ç±»
 */
export class UserService {
  private apiUrl: string;

  constructor(apiUrl: string) {
    this.apiUrl = apiUrl;
  }

  /**
   * è·å–ç”¨æˆ·ä¿¡æ¯
   * @param userId - ç”¨æˆ· ID
   * @returns ç”¨æˆ·å¯¹è±¡
   */
  async getUser(userId: string): Promise<User> {
    const response = await fetch(`${this.apiUrl}/users/${userId}`);

    if (!response.ok) {
      throw new Error("Failed to fetch user");
    }

    return response.json();
  }
}
```

## ğŸ“š æ–‡æ¡£è§„èŒƒ

### ä»£ç æ–‡æ¡£

**Python (Docstrings)**ï¼š

```python
def calculate_sharpe_ratio(
    returns: pd.Series,
    risk_free_rate: float = 0.03,
    periods_per_year: int = 252
) -> float:
    """è®¡ç®—å¤æ™®æ¯”ç‡

    å¤æ™®æ¯”ç‡æ˜¯è¡¡é‡æŠ•èµ„ç»„åˆé£é™©è°ƒæ•´åæ”¶ç›Šçš„æŒ‡æ ‡ã€‚

    Args:
        returns: æ”¶ç›Šç‡åºåˆ—
        risk_free_rate: æ— é£é™©åˆ©ç‡ï¼Œé»˜è®¤ 3%
        periods_per_year: å¹´åŒ–å‘¨æœŸæ•°ï¼Œé»˜è®¤ 252ï¼ˆäº¤æ˜“æ—¥ï¼‰

    Returns:
        å¹´åŒ–å¤æ™®æ¯”ç‡

    Raises:
        ValueError: å½“ returns ä¸ºç©ºæ—¶

    Example:
        >>> returns = pd.Series([0.01, 0.02, -0.01, 0.03])
        >>> sharpe = calculate_sharpe_ratio(returns)
        >>> print(f"Sharpe Ratio: {sharpe:.2f}")
    """
    if returns.empty:
        raise ValueError("Returns series cannot be empty")

    excess_returns = returns - risk_free_rate / periods_per_year
    return np.sqrt(periods_per_year) * excess_returns.mean() / excess_returns.std()
```

**TypeScript (JSDoc)**ï¼š

````typescript
/**
 * æ ¼å¼åŒ–è´§å¸é‡‘é¢
 *
 * @param amount - é‡‘é¢æ•°å€¼
 * @param currency - è´§å¸ä»£ç ï¼Œé»˜è®¤ 'CNY'
 * @returns æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²
 *
 * @example
 * ```typescript
 * formatCurrency(1234.56) // "Â¥1,234.56"
 * formatCurrency(1000, 'USD') // "$1,000.00"
 * ```
 */
export function formatCurrency(
  amount: number,
  currency: string = "CNY"
): string {
  return new Intl.NumberFormat("zh-CN", {
    style: "currency",
    currency,
  }).format(amount);
}
````

### README æ–‡æ¡£

æ¯ä¸ªé¡¹ç›®å¿…é¡»åŒ…å«ï¼š

````markdown
# é¡¹ç›®åç§°

ç®€çŸ­æè¿°é¡¹ç›®ç”¨é€”ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ç‰¹æ€§ 1
- ç‰¹æ€§ 2

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- Node.js 18+

### å®‰è£…

\```bash
git clone https://github.com/swift-coding-club/project.git
cd project
pip install -r requirements.txt
\```

### è¿è¡Œ

\```bash
python main.py
\```

## æ¶æ„

ç®€è¦è¯´æ˜é¡¹ç›®æ¶æ„ã€‚

## è´¡çŒ®æŒ‡å—

è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md)

## è®¸å¯è¯

MIT License
````

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

- **æ ¸å¿ƒä¸šåŠ¡é€»è¾‘**ï¼š>= 80%
- **API ç«¯ç‚¹**ï¼š>= 70%
- **UI ç»„ä»¶**ï¼š>= 60%

### Python æµ‹è¯• (pytest)

```python
# tests/test_backtest.py
import pytest
import pandas as pd
from src.backtest import VectorizedBacktest


class TestVectorizedBacktest:
    """å›æµ‹å¼•æ“æµ‹è¯•ç±»"""

    @pytest.fixture
    def sample_data(self):
        """æµ‹è¯•æ•°æ® fixture"""
        return pd.DataFrame({
            'price': [100, 101, 102, 101, 103],
            'signal': [1, 1, 0, -1, 0]
        })

    def test_basic_backtest(self, sample_data):
        """æµ‹è¯•åŸºæœ¬å›æµ‹åŠŸèƒ½"""
        engine = VectorizedBacktest(
            prices=sample_data['price'],
            signals=sample_data['signal']
        )
        result = engine.run()

        assert 'cumulative_returns' in result
        assert 'sharpe_ratio' in result
        assert result['sharpe_ratio'] > 0

    def test_transaction_costs(self, sample_data):
        """æµ‹è¯•äº¤æ˜“æˆæœ¬è®¡ç®—"""
        engine = VectorizedBacktest(
            prices=sample_data['price'],
            signals=sample_data['signal'],
            transaction_cost=0.01
        )
        result_with_cost = engine.run()

        engine_no_cost = VectorizedBacktest(
            prices=sample_data['price'],
            signals=sample_data['signal'],
            transaction_cost=0
        )
        result_no_cost = engine_no_cost.run()

        # æœ‰äº¤æ˜“æˆæœ¬çš„æ”¶ç›Šåº”è¯¥æ›´ä½
        assert (
            result_with_cost['cumulative_returns'].iloc[-1] <
            result_no_cost['cumulative_returns'].iloc[-1]
        )
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# æµ‹è¯•è¦†ç›–ç‡
pytest --cov=src --cov-report=html

# åªè¿è¡Œæ ‡è®°çš„æµ‹è¯•
pytest -m "not slow"
```

## ğŸ” Code Review æ¸…å•

Reviewer åº”æ£€æŸ¥ï¼š

### åŠŸèƒ½æ€§

- [ ] ä»£ç æ˜¯å¦å®ç°äº† PR æè¿°çš„åŠŸèƒ½
- [ ] æ˜¯å¦æœ‰è¾¹ç•Œæ¡ä»¶æœªå¤„ç†
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦å……åˆ†

### å¯è¯»æ€§

- [ ] å˜é‡å‘½åæ˜¯å¦æ¸…æ™°
- [ ] æ˜¯å¦æœ‰å¿…è¦çš„æ³¨é‡Š
- [ ] ä»£ç é€»è¾‘æ˜¯å¦æ˜“æ‡‚

### æ€§èƒ½

- [ ] æ˜¯å¦æœ‰æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜
- [ ] æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦ä¼˜åŒ–
- [ ] æ˜¯å¦æœ‰ä¸å¿…è¦çš„å¾ªç¯

### å®‰å…¨æ€§

- [ ] æ˜¯å¦æœ‰ SQL æ³¨å…¥é£é™©
- [ ] ç”¨æˆ·è¾“å…¥æ˜¯å¦éªŒè¯
- [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦åŠ å¯†

### æµ‹è¯•

- [ ] æ˜¯å¦æœ‰å……åˆ†çš„æµ‹è¯•
- [ ] æµ‹è¯•æ˜¯å¦è¦†ç›–ä¸»è¦åœºæ™¯
- [ ] æµ‹è¯•æ˜¯å¦å…¨éƒ¨é€šè¿‡

## ğŸ“¦ ä¾èµ–ç®¡ç†

### Python (requirements.txt)

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æ·»åŠ æ–°ä¾èµ–
pip install package-name
pip freeze > requirements.txt

# æˆ–ä½¿ç”¨ Poetry
poetry add package-name
```

### Node.js (package.json)

```bash
# å®‰è£…ä¾èµ–
npm install

# æ·»åŠ æ–°ä¾èµ–
npm install package-name

# æ›´æ–°ä¾èµ–
npm update
```

### ä¾èµ–å®¡æŸ¥

- å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬ï¼ˆæ¯æœˆï¼‰
- æ£€æŸ¥å®‰å…¨æ¼æ´ï¼š`npm audit` / `safety check`
- é¿å…ä½¿ç”¨åºŸå¼ƒçš„åŒ…

---

**éµå®ˆè§„èŒƒï¼Œè®©åä½œæ›´é«˜æ•ˆï¼** âœ¨

_æœ€åæ›´æ–°ï¼š2024-12-10_
